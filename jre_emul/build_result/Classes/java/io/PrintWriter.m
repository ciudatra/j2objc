//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/retechretech/dev/tools/lib/j2objc/jre_emul/apache_harmony/classlib/modules/luni/src/main/java/java/io/PrintWriter.java
//
//  Created by retechretech on 13-3-15.
//

#import "IOSCharArray.h"
#import "java/io/BufferedOutputStream.h"
#import "java/io/File.h"
#import "java/io/FileOutputStream.h"
#import "java/io/IOException.h"
#import "java/io/OutputStream.h"
#import "java/io/OutputStreamWriter.h"
#import "java/io/PrintWriter.h"
#import "java/io/Writer.h"
#import "java/lang/CharSequence.h"
#import "java/lang/NullPointerException.h"

@implementation JavaIoPrintWriter

+ (NSArray *)memDebugStaticReferences {
  NSMutableArray *result = [NSMutableArray array];
  return result;
}

- (JavaIoWriter *)out {
  return [[out_ retain] autorelease];
}
- (void)setOut:(JavaIoWriter *)out {
  JreOperatorRetainedAssign(&out_, out);
}
@synthesize out = out_;
@synthesize ioError = ioError_;
@synthesize autoflush = autoflush_;
- (NSString *)lineSeparator {
  return [[lineSeparator_ retain] autorelease];
}
- (void)setLineSeparator:(NSString *)lineSeparator {
  JreOperatorRetainedAssign(&lineSeparator_, lineSeparator);
}
@synthesize lineSeparator = lineSeparator_;

- (id)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:[[[JavaIoOutputStreamWriter alloc] initWithJavaIoOutputStream:outArg] autorelease] withBOOL:NO]);
}

- (id)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg
                        withBOOL:(BOOL)autoflush {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:[[[JavaIoOutputStreamWriter alloc] initWithJavaIoOutputStream:outArg] autorelease] withBOOL:autoflush]);
}

- (id)initWithJavaIoWriter:(JavaIoWriter *)wr {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:wr withBOOL:NO]);
}

- (id)initJavaIoPrintWriterWithJavaIoWriter:(JavaIoWriter *)wr
                                   withBOOL:(BOOL)autoflush {
  if ((self = [super initWithId:wr])) {
    JreOperatorRetainedAssign(&lineSeparator_, @"\n");
    self.autoflush = autoflush;
    JreOperatorRetainedAssign(&out_, wr);
    JreMemDebugAdd(self);
  }
  return self;
}

- (id)initWithJavaIoWriter:(JavaIoWriter *)wr
                  withBOOL:(BOOL)autoflush {
  return [self initJavaIoPrintWriterWithJavaIoWriter:wr withBOOL:autoflush];
}

- (id)initWithJavaIoFile:(JavaIoFile *)file {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:[[[JavaIoOutputStreamWriter alloc] initWithJavaIoOutputStream:[[[JavaIoBufferedOutputStream alloc] initWithJavaIoOutputStream:[[[JavaIoFileOutputStream alloc] initWithJavaIoFile:file] autorelease]] autorelease]] autorelease] withBOOL:NO]);
}

- (id)initWithJavaIoFile:(JavaIoFile *)file
            withNSString:(NSString *)csn {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:[[[JavaIoOutputStreamWriter alloc] initWithJavaIoOutputStream:[[[JavaIoBufferedOutputStream alloc] initWithJavaIoOutputStream:[[[JavaIoFileOutputStream alloc] initWithJavaIoFile:file] autorelease]] autorelease] withNSString:csn] autorelease] withBOOL:NO]);
}

- (id)initWithNSString:(NSString *)fileName {
  return JreMemDebugAdd([self initJavaIoPrintWriterWithJavaIoWriter:[[[JavaIoOutputStreamWriter alloc] initWithJavaIoOutputStream:[[[JavaIoBufferedOutputStream alloc] initWithJavaIoOutputStream:[[[JavaIoFileOutputStream alloc] initWithNSString:fileName] autorelease]] autorelease]] autorelease] withBOOL:NO]);
}

- (BOOL)checkError {
  JavaIoWriter *delegate = out_;
  if (delegate == nil) {
    return ioError_;
  }
  [self flush];
  return ioError_ || [((JavaIoWriter *) NIL_CHK(delegate)) checkError];
}

- (void)close {
  @synchronized (lock_) {
    if (out_ != nil) {
      @try {
        [out_ close];
      }
      @catch (JavaIoIOException *e) {
        [self setError];
      }
      JreOperatorRetainedAssign(&out_, nil);
    }
  }
}

- (void)flush {
  @synchronized (lock_) {
    if (out_ != nil) {
      @try {
        [out_ flush];
      }
      @catch (JavaIoIOException *e) {
        [self setError];
      }
    }
    else {
      [self setError];
    }
  }
}

- (void)printWithJavaLangCharacterArray:(IOSCharArray *)charArray {
  [self printWithNSString:[NSString stringWithCharacters:charArray offset:0 length:(int) [((IOSCharArray *) NIL_CHK(charArray)) count]]];
}

- (void)printWithUnichar:(unichar)ch {
  [self printWithNSString:[NSString valueOfChar:ch]];
}

- (void)printWithDouble:(double)dnum {
  [self printWithNSString:[NSString valueOfDouble:dnum]];
}

- (void)printWithFloat:(float)fnum {
  [self printWithNSString:[NSString valueOfFloat:fnum]];
}

- (void)printWithInt:(int)inum {
  [self printWithNSString:[NSString valueOfInt:inum]];
}

- (void)printWithLongInt:(long long int)lnum {
  [self printWithNSString:[NSString valueOfLong:lnum]];
}

- (void)printWithId:(id)obj {
  [self printWithNSString:[NSString valueOf:obj]];
}

- (void)printWithNSString:(NSString *)str {
  [self writeWithNSString:str != nil ? str : [NSString valueOf:(id) nil]];
}

- (void)printWithBOOL:(BOOL)bool_ {
  [self printWithNSString:[NSString valueOfBool:bool_]];
}

- (void)println {
  @synchronized (lock_) {
    [self printWithNSString:lineSeparator_];
    if (autoflush_) {
      [self flush];
    }
  }
}

- (void)printlnWithJavaLangCharacterArray:(IOSCharArray *)charArray {
  [self printlnWithNSString:[NSString stringWithCharacters:charArray offset:0 length:(int) [((IOSCharArray *) NIL_CHK(charArray)) count]]];
}

- (void)printlnWithUnichar:(unichar)ch {
  [self printlnWithNSString:[NSString valueOfChar:ch]];
}

- (void)printlnWithDouble:(double)dnum {
  [self printlnWithNSString:[NSString valueOfDouble:dnum]];
}

- (void)printlnWithFloat:(float)fnum {
  [self printlnWithNSString:[NSString valueOfFloat:fnum]];
}

- (void)printlnWithInt:(int)inum {
  [self printlnWithNSString:[NSString valueOfInt:inum]];
}

- (void)printlnWithLongInt:(long long int)lnum {
  [self printlnWithNSString:[NSString valueOfLong:lnum]];
}

- (void)printlnWithId:(id)obj {
  [self printlnWithNSString:[NSString valueOf:obj]];
}

- (void)printlnWithNSString:(NSString *)str {
  @synchronized (lock_) {
    [self printWithNSString:str];
    [self println];
  }
}

- (void)printlnWithBOOL:(BOOL)bool_ {
  [self printlnWithNSString:[NSString valueOfBool:bool_]];
}

- (void)setError {
  @synchronized (lock_) {
    ioError_ = YES;
  }
}

- (void)writeWithJavaLangCharacterArray:(IOSCharArray *)buf {
  [self writeWithJavaLangCharacterArray:buf withInt:0 withInt:(int) [((IOSCharArray *) NIL_CHK(buf)) count]];
}

- (void)writeWithJavaLangCharacterArray:(IOSCharArray *)buf
                                withInt:(int)offset
                                withInt:(int)count {
  [self doWriteWithJavaLangCharacterArray:buf withInt:offset withInt:count];
}

- (void)writeWithInt:(int)oneChar {
  [self doWriteWithJavaLangCharacterArray:[IOSCharArray arrayWithCharacters:(unichar[]){ (unichar) oneChar } count:1] withInt:0 withInt:1];
}

- (void)doWriteWithJavaLangCharacterArray:(IOSCharArray *)buf
                                  withInt:(int)offset
                                  withInt:(int)count {
  @synchronized (lock_) {
    if (out_ != nil) {
      @try {
        [out_ writeWithJavaLangCharacterArray:buf withInt:offset withInt:count];
      }
      @catch (JavaIoIOException *e) {
        [self setError];
      }
    }
    else {
      [self setError];
    }
  }
}

- (void)writeWithNSString:(NSString *)str {
  [self writeWithJavaLangCharacterArray:[NIL_CHK(str) toCharArray]];
}

- (void)writeWithNSString:(NSString *)str
                  withInt:(int)offset
                  withInt:(int)count {
  [self writeWithJavaLangCharacterArray:[[NIL_CHK(str) substring:offset endIndex:offset + count] toCharArray]];
}

- (JavaIoPrintWriter *)appendWithUnichar:(unichar)c {
  [self writeWithInt:c];
  return self;
}

- (JavaIoPrintWriter *)appendWithJavaLangCharSequence:(id<JavaLangCharSequence>)csq {
  if (nil == csq) {
    [self appendWithJavaLangCharSequence:[JavaIoWriter TOKEN_NULL] withInt:0 withInt:[NIL_CHK([JavaIoWriter TOKEN_NULL]) length]];
  }
  else {
    [self appendWithJavaLangCharSequence:csq withInt:0 withInt:[csq sequenceLength]];
  }
  return self;
}

- (JavaIoPrintWriter *)appendWithJavaLangCharSequence:(id<JavaLangCharSequence>)csq
                                              withInt:(int)start
                                              withInt:(int)end {
  if (nil == csq) {
    csq = [JavaIoWriter TOKEN_NULL];
  }
  NSString *output = [((id<JavaLangCharSequence>) [((id<JavaLangCharSequence>) NIL_CHK(csq)) subSequenceFrom:start to:end]) sequenceDescription];
  [self writeWithNSString:output withInt:0 withInt:[NIL_CHK(output) length]];
  return self;
}

- (void)dealloc {
  JreMemDebugRemove(self);
  JreOperatorRetainedAssign(&lineSeparator_, nil);
  JreOperatorRetainedAssign(&out_, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  JavaIoPrintWriter *typedCopy = (JavaIoPrintWriter *) copy;
  typedCopy.out = out_;
  typedCopy.ioError = ioError_;
  typedCopy.autoflush = autoflush_;
  typedCopy.lineSeparator = lineSeparator_;
}

- (NSArray *)memDebugStrongReferences {
  NSMutableArray *result =
      [[[super memDebugStrongReferences] mutableCopy] autorelease];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:out_ name:@"out"]];
  [result addObject:[JreMemDebugStrongReference strongReferenceWithObject:lineSeparator_ name:@"lineSeparator"]];
  return result;
}

@end
